<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
		<title>Penguin Glider - Arctic Adventure</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			html,
			body {
				margin: 0;
				padding: 0;
				background: #000;
				font-family: "Arial", sans-serif;
				overflow: hidden;
				touch-action: none; /* Prevent default touch behaviors */
				user-select: none; /* Prevent text selection */
				position: relative;
				width: 100%;
				height: 100%;
				/* Prevent zoom on mobile */
				-webkit-text-size-adjust: 100%;
				-ms-text-size-adjust: 100%;
			}

			body {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
			}

			canvas {
				display: block;
				position: absolute;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: linear-gradient(to bottom, #87ceeb 0%, #4682b4 50%, #1e3a8a 100%);
				z-index: 1;
				/* Prevent canvas from being selectable */
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}

			/* UI Elements overlay */
			.ui-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				pointer-events: none;
				z-index: 10;
				display: flex;
				flex-direction: column;
			}

			.top-ui {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				padding: max(20px, env(safe-area-inset-top, 20px)) 20px 20px 20px;
				width: 100%;
				gap: 20px;
			}

			.score {
				font-size: clamp(24px, 5vw, 32px);
				font-weight: bold;
				color: #ffd700;
				text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
				background: rgba(0, 0, 0, 0.3);
				padding: clamp(8px, 2vw, 10px) clamp(15px, 4vw, 20px);
				border-radius: 15px;
				backdrop-filter: blur(10px);
				white-space: nowrap;
			}

			.instructions {
				font-size: clamp(14px, 3vw, 18px);
				color: #e6f3ff;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
				background: rgba(0, 0, 0, 0.3);
				padding: clamp(8px, 2vw, 10px) clamp(12px, 3vw, 15px);
				border-radius: 10px;
				backdrop-filter: blur(10px);
				max-width: min(300px, 40vw);
				line-height: 1.4;
			}

			.game-over {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				background: rgba(0, 0, 0, 0.9);
				color: white;
				padding: clamp(30px, 8vw, 40px);
				border-radius: 20px;
				text-align: center;
				display: none;
				z-index: 20;
				backdrop-filter: blur(15px);
				border: 2px solid rgba(255, 255, 255, 0.1);
				box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
				pointer-events: auto;
				max-width: 90vw;
				max-height: 90vh;
			}

			/* Start Screen */
			.start-screen {
				position: fixed;
				top: 0;
				left: 0;
				width: 100vw;
				height: 100vh;
				background: linear-gradient(to bottom, #87ceeb 0%, #4682b4 50%, #1e3a8a 100%);
				color: white;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				z-index: 30;
				text-align: center;
				padding: 20px;
			}

			.start-screen h1 {
				font-size: clamp(32px, 8vw, 48px);
				margin-bottom: 30px;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
			}

			.game-instructions {
				font-size: clamp(16px, 4vw, 20px);
				line-height: 1.6;
				margin-bottom: 40px;
				max-width: 600px;
				background: rgba(0, 0, 0, 0.3);
				padding: 20px;
				border-radius: 15px;
				backdrop-filter: blur(10px);
			}

			.play-button {
				background: #4a90e2;
				color: white;
				border: none;
				padding: clamp(15px, 4vw, 20px) clamp(30px, 8vw, 40px);
				border-radius: 15px;
				cursor: pointer;
				font-size: clamp(18px, 5vw, 24px);
				font-weight: bold;
				transition: all 0.3s;
				pointer-events: auto;
				touch-action: manipulation;
				box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
			}

			.play-button:hover,
			.play-button:active {
				background: #357abd;
				transform: scale(1.05);
				box-shadow: 0 8px 25px rgba(74, 144, 226, 0.6);
			}

			.game-over h2 {
				font-size: clamp(24px, 6vw, 32px);
				margin-bottom: 15px;
			}

			.game-over p {
				font-size: clamp(16px, 4vw, 18px);
				margin-bottom: 10px;
			}

			.restart-btn {
				background: #4a90e2;
				color: white;
				border: none;
				padding: clamp(12px, 3vw, 15px) clamp(25px, 6vw, 30px);
				border-radius: 10px;
				cursor: pointer;
				font-size: clamp(16px, 4vw, 18px);
				margin-top: 20px;
				transition: all 0.3s;
				pointer-events: auto;
				touch-action: manipulation;
			}

			.restart-btn:hover,
			.restart-btn:active {
				background: #357abd;
				transform: scale(1.05);
			}

			/* Mobile Controls */
			.mobile-controls {
				position: fixed;
				bottom: max(30px, env(safe-area-inset-bottom, 30px));
				left: 50%;
				transform: translateX(-50%);
				display: none;
				flex-direction: row;
				justify-content: space-between;
				align-items: center;
				width: min(90vw, 500px);
				padding: clamp(15px, 4vw, 20px);
				z-index: 15;
				pointer-events: none;
				gap: 10px;
			}

			.control-button {
				background: rgba(74, 144, 226, 0.9);
				border: 2px solid #4a90e2;
				border-radius: 15px;
				color: white;
				font-size: clamp(18px, 4vw, 20px);
				font-weight: bold;
				padding: clamp(15px, 4vw, 20px);
				min-width: clamp(60px, 15vw, 70px);
				min-height: clamp(60px, 15vw, 70px);
				display: flex;
				align-items: center;
				justify-content: center;
				touch-action: manipulation;
				user-select: none;
				backdrop-filter: blur(15px);
				box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
				transition: all 0.1s;
				pointer-events: auto;
				flex-shrink: 0;
			}

			.control-button:active {
				background: rgba(53, 122, 189, 0.9);
				transform: scale(0.95);
				box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
			}

			.jump-button {
				background: rgba(255, 140, 0, 0.9);
				border-color: #ff8c00;
				flex: 1;
				margin: 0 15px;
				min-height: clamp(70px, 18vw, 80px);
				font-size: clamp(18px, 4vw, 22px);
				max-width: 200px;
			}

			.jump-button:active {
				background: rgba(255, 140, 0, 1);
			}

			/* Show mobile controls on touch devices */
			@media (hover: none) and (pointer: coarse) {
				.mobile-controls {
					display: flex !important;
				}

				.instructions {
					font-size: clamp(12px, 3vw, 16px);
				}

				/* Hide instructions on very small screens when controls are visible */
				@media (max-height: 600px) {
					.instructions {
						display: none;
					}
				}
			}

			/* Alternative mobile detection */
			@media (max-width: 768px) {
				.mobile-controls {
					display: flex;
				}

				.top-ui {
					flex-direction: column;
					align-items: center;
					gap: 10px;
				}

				.instructions {
					text-align: center;
					max-width: 80vw;
				}
			}

			/* Very small screens */
			@media (max-width: 480px) {
				.top-ui {
					padding: 10px;
				}

				.score {
					font-size: clamp(20px, 5vw, 24px);
				}

				.instructions {
					font-size: clamp(12px, 3vw, 14px);
				}

				.mobile-controls {
					bottom: 20px;
					padding: 10px;
					gap: 8px;
				}

				.control-button {
					min-width: clamp(50px, 12vw, 60px);
					min-height: clamp(50px, 12vw, 60px);
					font-size: clamp(16px, 3.5vw, 18px);
					padding: clamp(10px, 3vw, 15px);
				}

				.jump-button {
					min-height: clamp(60px, 15vw, 70px);
					font-size: clamp(16px, 3.5vw, 20px);
					margin: 0 8px;
				}
			}

			/* Landscape orientation on mobile */
			@media (max-height: 500px) and (orientation: landscape) {
				.top-ui {
					padding: 5px 20px;
					flex-direction: row;
					justify-content: space-between;
				}

				.instructions {
					font-size: clamp(10px, 2vw, 14px);
					max-width: 50vw;
				}

				.mobile-controls {
					bottom: 10px;
					padding: 5px;
				}

				.control-button {
					min-width: clamp(40px, 8vw, 50px);
					min-height: clamp(40px, 8vw, 50px);
					font-size: clamp(14px, 2.5vw, 16px);
				}

				.jump-button {
					min-height: clamp(45px, 10vw, 55px);
					font-size: clamp(14px, 2.5vw, 18px);
				}
			}
		</style>
	</head>
	<body>
		<!-- Start Screen -->
		<div class="start-screen" id="startScreen">

		</div>

		<canvas id="gameCanvas"></canvas>

		<!-- UI Overlay -->
		<div class="ui-overlay">
			<div class="top-ui">
				<div class="score">Score: <span id="score">0</span></div>
			</div>
		</div>

		<!-- Mobile Touch Controls -->
		<div class="mobile-controls" id="mobileControls">
			<button class="control-button" id="leftBtn">←</button>
			<button class="control-button jump-button" id="jumpBtn">JUMP/GLIDE</button>
			<button class="control-button" id="rightBtn">→</button>
		</div>

		<!-- Game Over Modal -->
		<div class="game-over" id="gameOver">
			<h2>Game Over!</h2>
			<p>The penguin fell into the icy water! ❄️</p>
			<p>Final Score: <span id="finalScore">0</span></p>
			<button class="restart-btn" onclick="restartGame()">Try Again</button>
		</div>

		<script src="game.js"></script>
		<script>
			// Start screen functionality
			function startGame() {
				const startScreen = document.getElementById("startScreen");
				startScreen.style.display = "none";

				// Initialize and start the game
				if (typeof game === "undefined") {
					game = new PenguinGlider();
				} else {
					game.restart();
				}
			}

			// Restart game directly without showing start screen
			function restartGame() {
				const gameOver = document.getElementById("gameOver");
				gameOver.style.display = "none";

				if (game) {
					game.restart();
				} else {
					game = new PenguinGlider();
				}
			}

			// Function to return to start screen (if needed)
			function returnToStart() {
				const startScreen = document.getElementById("startScreen");
				startScreen.style.display = "flex";

				const gameOver = document.getElementById("gameOver");
				gameOver.style.display = "none";
			}
		</script>
		<script src="start.js"></script>
	</body>
</html>